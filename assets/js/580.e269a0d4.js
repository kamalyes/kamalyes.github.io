(window.webpackJsonp=window.webpackJsonp||[]).push([[580],{894:function(s,t,a){"use strict";a.r(t);var n=a(7),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"zookeeper-acl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper-acl"}},[s._v("#")]),s._v(" ZooKeeper ACL")]),s._v(" "),t("blockquote",[t("p",[s._v("为了避免存储在 Zookeeper 上的数据被其他程序或者人为误修改，Zookeeper 提供了 ACL(Access Control Lists) 进行权限控制。")]),s._v(" "),t("p",[s._v("ACL 权限可以针对节点设置相关读写等权限，保障数据安全性。")])]),s._v(" "),t("p",[s._v("ZooKeeper ACL 提供了以下几种命令行：")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("getAcl 命令")]),s._v("：获取某个节点的 acl 权限信息。")]),s._v(" "),t("li",[t("strong",[s._v("setAcl 命令")]),s._v("：设置某个节点的 acl 权限信息。")]),s._v(" "),t("li",[t("strong",[s._v("addauth 命令")]),s._v("：输入认证授权信息，注册时输入明文密码，加密形式保存。")])]),s._v(" "),t("h2",{attrs:{id:"acl-组成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#acl-组成"}},[s._v("#")]),s._v(" ACL 组成")]),s._v(" "),t("p",[s._v("Zookeeper 的 acl 通过 "),t("strong",[t("code",[s._v("[scheme:id:permissions]")])]),s._v(" 来构成权限列表。")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("scheme")]),s._v("：代表采用的某种权限机制，包括 world、auth、digest、ip、super 几种。\n"),t("ul",[t("li",[t("strong",[s._v("world")]),s._v("：默认模式，所有客户端都拥有指定的权限。world 下只有一个 id 选项，就是 anyone，通常组合写法为 "),t("code",[s._v("world:anyone:[permissons]")]),s._v("；")]),s._v(" "),t("li",[t("strong",[s._v("auth")]),s._v("：只有经过认证的用户才拥有指定的权限。通常组合写法为 "),t("code",[s._v("auth:user:password:[permissons]")]),s._v("，使用这种模式时，你需要先进行登录，之后采用 auth 模式设置权限时，"),t("code",[s._v("user")]),s._v(" 和 "),t("code",[s._v("password")]),s._v(" 都将使用登录的用户名和密码；")]),s._v(" "),t("li",[t("strong",[s._v("digest")]),s._v("：只有经过认证的用户才拥有指定的权限。通常组合写法为 "),t("code",[s._v("auth:user:BASE64(SHA1(password)):[permissons]")]),s._v("，这种形式下的密码必须通过 SHA1 和 BASE64 进行双重加密；")]),s._v(" "),t("li",[t("strong",[s._v("ip")]),s._v("：限制只有特定 IP 的客户端才拥有指定的权限。通常组成写法为 "),t("code",[s._v("ip:182.168.0.168:[permissions]")]),s._v("；")]),s._v(" "),t("li",[t("strong",[s._v("super")]),s._v("：代表超级管理员，拥有所有的权限，需要修改 Zookeeper 启动脚本进行配置。")])])]),s._v(" "),t("li",[t("strong",[s._v("id")]),s._v("：代表允许访问的用户。")]),s._v(" "),t("li",[t("strong",[s._v("permissions")]),s._v("：权限组合字符串，由 cdrwa 组成，其中每个字母代表支持不同权限。可选项如下：\n"),t("ul",[t("li",[t("strong",[s._v("CREATE")]),s._v("：允许创建子节点；")]),s._v(" "),t("li",[t("strong",[s._v("READ")]),s._v("：允许从节点获取数据并列出其子节点；")]),s._v(" "),t("li",[t("strong",[s._v("WRITE")]),s._v("：允许为节点设置数据；")]),s._v(" "),t("li",[t("strong",[s._v("DELETE")]),s._v("：允许删除子节点；")]),s._v(" "),t("li",[t("strong",[s._v("ADMIN")]),s._v("：允许为节点设置权限。")])])])]),s._v(" "),t("h2",{attrs:{id:"设置与查看权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置与查看权限"}},[s._v("#")]),s._v(" 设置与查看权限")]),s._v(" "),t("p",[s._v("想要给某个节点设置权限 (ACL)，有以下两个可选的命令：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.给已有节点赋予权限")]),s._v("\n setAcl path acl\n\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.在创建节点时候指定权限")]),s._v("\n create "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" path data acl\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("查看指定节点的权限命令如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("getAcl path\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"添加认证信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加认证信息"}},[s._v("#")]),s._v(" 添加认证信息")]),s._v(" "),t("p",[s._v("可以使用如下所示的命令为当前 Session 添加用户认证信息，等价于登录操作。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 格式")]),s._v("\naddauth scheme auth\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#示例：添加用户名为test,密码为root的用户认证信息")]),s._v("\naddauth digest test:root\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"权限设置示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#权限设置示例"}},[s._v("#")]),s._v(" 权限设置示例")]),s._v(" "),t("h3",{attrs:{id:"world-模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#world-模式"}},[s._v("#")]),s._v(" world 模式")]),s._v(" "),t("p",[s._v("world 是一种默认的模式，即创建时如果不指定权限，则默认的权限就是 world。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" create /mytest abc\nCreated /mytest\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" getAcl /mytest\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'world,'")]),s._v("anyone "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认的权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" cdrwa\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" setAcl /mytest world:anyone:cwda "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改节点，不允许所有客户端读")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" get /mytest\norg.apache.zookeeper.KeeperException"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NoAuthException")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" KeeperErrorCode "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NoAuth "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" /mytest "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 无权访问")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"auth-模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#auth-模式"}},[s._v("#")]),s._v(" auth 模式")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" addauth digest test:root "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" setAcl /mytest auth::cdrwa "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("38")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" getAcl /mytest "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看权限信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'digest,'")]),s._v("heibai:sCxtVJ1gPG8UW/jzFHR0A1ZKY5s"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户名和密码 (密码经过加密处理)，注意返回的权限类型是 digest")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" cdrwa\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户名和密码都是使用登录的用户名和密码，即使你在创建权限时候进行指定也是无效的")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("39")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" setAcl /mytest auth:root:root:cdrwa    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定用户名和密码为 root")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" getAcl /mytest\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'digest,'")]),s._v("heibai:sCxtVJ1gPG8UW/jzFHR0A1ZKY5s"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#无效，使用的用户名和密码依然还是 test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" cdrwa\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"digest-模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#digest-模式"}},[s._v("#")]),s._v(" digest 模式")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk:55"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" create /spark "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spark"')]),s._v(" digest:heibai:sCxtVJ1gPG8UW/jzFHR0A1ZKY5s"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(":cdrwa  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定用户名和加密后的密码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk:45"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" getAcl /spark  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'digest,'")]),s._v("heibai:sCxtVJ1gPG8UW/jzFHR0A1ZKY5s"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回的权限类型是 digest")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" cdrwa\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("到这里你可以发现使用 "),t("code",[s._v("auth")]),s._v(" 模式设置的权限和使用 "),t("code",[s._v("digest")]),s._v(" 模式设置的权限，在最终结果上，得到的权限模式都是 "),t("code",[s._v("digest")]),s._v("。某种程度上，你可以把 "),t("code",[s._v("auth")]),s._v(" 模式理解成是 "),t("code",[s._v("digest")]),s._v(" 模式的一种简便实现。因为在 "),t("code",[s._v("digest")]),s._v(" 模式下，每次设置都需要书写用户名和加密后的密码，这是比较繁琐的，采用 "),t("code",[s._v("auth")]),s._v(" 模式就可以避免这种麻烦。")]),s._v(" "),t("h3",{attrs:{id:"ip-模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ip-模式"}},[s._v("#")]),s._v(" ip 模式")]),s._v(" "),t("p",[s._v("限定只有特定的 ip 才能访问。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("46")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" create /hive "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hive"')]),s._v(" ip:192.168.0.108:cdrwa\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("47")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" get /hive\nAuthentication is not valid "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" /hive  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前主机已经不能访问")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("这里可以看到当前主机已经不能访问，想要能够再次访问，可以使用对应 IP 的客户端，或使用下面介绍的 "),t("code",[s._v("super")]),s._v(" 模式。")]),s._v(" "),t("h3",{attrs:{id:"super-模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#super-模式"}},[s._v("#")]),s._v(" super 模式")]),s._v(" "),t("p",[s._v("需要修改启动脚本 "),t("code",[s._v("zkServer.sh")]),s._v("，并在指定位置添加超级管理员账户和密码信息：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Dzookeeper.DigestAuthenticationProvider.superDigest=heibai:sCxtVJ1gPG8UW/jzFHR0A1ZKY5s="')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("修改完成后需要使用 "),t("code",[s._v("zkServer.sh restart")]),s._v(" 重启服务，此时再次访问限制 IP 的节点：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" get /hive  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#访问受限")]),s._v("\nAuthentication is not valid "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" /hive\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" addauth digest heibai:heibai  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录 (添加认证信息)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" get /hive  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#成功访问")]),s._v("\nhive\ncZxid "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x158\nctime "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Sat May "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" 09:11:29 CST "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\nmZxid "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x158\nmtime "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Sat May "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" 09:11:29 CST "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\npZxid "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x158\ncversion "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndataVersion "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\naclVersion "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nephemeralOwner "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x0\ndataLength "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\nnumChildren "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.w3cschool.cn/zookeeper/zookeeper_installation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Zookeeper 安装"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/heibaiying/BigData-Notes/blob/master/notes/installation/Zookeeper%E5%8D%95%E6%9C%BA%E7%8E%AF%E5%A2%83%E5%92%8C%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("Zookeeper 单机环境和集群环境搭建"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.runoob.com/w3cnote/zookeeper-bs-command.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Zookeeper 客户端基础命令使用"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);