(window.webpackJsonp=window.webpackJsonp||[]).push([[784],{1096:function(s,a,t){"use strict";t.r(a);var e=t(7),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mongodb-运维"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-运维"}},[s._v("#")]),s._v(" MongoDB 运维")]),s._v(" "),a("h2",{attrs:{id:"mongodb-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-安装"}},[s._v("#")]),s._v(" MongoDB 安装")]),s._v(" "),a("h3",{attrs:{id:"windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[s._v("#")]),s._v(" Windows")]),s._v(" "),a("p",[s._v("（1）下载并解压到本地")]),s._v(" "),a("p",[s._v("进入官网下载地址："),a("a",{attrs:{href:"https://www.mongodb.com/try/download/community",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[s._v("官方下载地址")]),a("OutboundLink")],1),s._v(" ，选择合适的版本下载。")]),s._v(" "),a("p",[s._v("（2）创建数据目录")]),s._v(" "),a("p",[s._v("MongoDB 将数据目录存储在 db 目录下。但是这个数据目录不会主动创建，我们在安装完成后需要创建它。")]),s._v(" "),a("p",[s._v("例如："),a("code",[s._v("D:\\Tools\\Server\\mongodb\\mongodb-4.4.0\\data\\db")])]),s._v(" "),a("p",[s._v("（3）运行 MongoDB 服务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mongod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dbpath")]),s._v(" D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mongodb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mongodb-4.4.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("db\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（4）客户端连接 MongoDB")]),s._v(" "),a("p",[s._v("可以在命令窗口中运行 mongo.exe 命令即可连接上 MongoDB")]),s._v(" "),a("p",[s._v("（5）配置 MongoDB 服务")]),s._v(" "),a("h3",{attrs:{id:"linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[s._v("#")]),s._v(" Linux")]),s._v(" "),a("p",[s._v("（1）使用安装包安装")]),s._v(" "),a("p",[s._v("安装前我们需要安装各个 Linux 平台依赖包。")]),s._v(" "),a("p",[a("strong",[s._v("Red Hat/CentOS：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo yum install libcurl openssl\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v('Ubuntu 18.04 LTS ("Bionic")/Debian 10 "Buster"：')])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo apt-get install libcurl4 openssl\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v('Ubuntu 16.04 LTS ("Xenial")/Debian 9 "Stretch"：')])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo apt-get install libcurl3 openssl\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（2）创建数据目录")]),s._v(" "),a("p",[s._v("默认情况下 MongoDB 启动后会初始化以下两个目录：")]),s._v(" "),a("ul",[a("li",[s._v("数据存储目录：/var/lib/mongodb")]),s._v(" "),a("li",[s._v("日志文件目录：/var/log/mongodb")])]),s._v(" "),a("p",[s._v("我们在启动前可以先创建这两个目录并设置当前用户有读写权限：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /var/lib/mongo\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /var/log/mongodb\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" /var/lib/mongo     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" /var/log/mongodb   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置权限")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("（3）运行 MongoDB 服务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mongod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dbpath")]),s._v(" /var/lib/mongo "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--logpath")]),s._v(" /var/log/mongodb/mongod.log "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--fork")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("打开 /var/log/mongodb/mongod.log 文件看到以下信息，说明启动成功。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tail -10f /var/log/mongodb/mongod.log")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-07-09T12:20:17.391+0800 I  NETWORK  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Listening on /tmp/mongodb-27017.sock\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-07-09T12:20:17.392+0800 I  NETWORK  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Listening on "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-07-09T12:20:17.392+0800 I  NETWORK  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" connections on port "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("（4）客户端连接 MongoDB")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mongodb4/bin\n./mongo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[a("a",{attrs:{href:"https://github.com/kamalyes/linux-tutorial/tree/master/codes/linux/soft",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux 安装脚本"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"设置用户名、密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置用户名、密码"}},[s._v("#")]),s._v(" 设置用户名、密码")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use admin\nswitched to db admin\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db.createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pwd"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"roles"')]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"role"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"userAdminAnyDatabase"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nSuccessfully added user: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"roles"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"role"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"userAdminAnyDatabase"')]),s._v(",\n                        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"备份和恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#备份和恢复"}},[s._v("#")]),s._v(" 备份和恢复")]),s._v(" "),a("h3",{attrs:{id:"数据备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据备份"}},[s._v("#")]),s._v(" 数据备份")]),s._v(" "),a("p",[s._v("在 Mongodb 中，使用 "),a("code",[s._v("mongodump")]),s._v(" 命令来备份 MongoDB 数据。该命令可以导出所有数据到指定目录中。")]),s._v(" "),a("p",[a("code",[s._v("mongodump")]),s._v(" 命令可以通过参数指定导出的数据量级转存的服务器。")]),s._v(" "),a("p",[s._v("mongodump 命令语法如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mongodump -h dbhost -d dbname -o dbdirectory\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("-h：MongDB 所在服务器地址，例如：127.0.0.1，当然也可以指定端口号：127.0.0.1:27017")])]),s._v(" "),a("li",[a("p",[s._v("-d：需要备份的数据库实例，例如：test")])]),s._v(" "),a("li",[a("p",[s._v("-o：备份的数据存放位置，例如：c:\\data\\dump，当然该目录需要提前建立，在备份完成后，系统自动在 dump 目录下建立一个 test 目录，这个目录里面存放该数据库实例的备份数据。")])])]),s._v(" "),a("p",[a("code",[s._v("mongodump")]),s._v(" 命令可选参数列表如下所示：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[s._v("语法")]),s._v(" "),a("th",{staticStyle:{"text-align":"left"}},[s._v("描述")]),s._v(" "),a("th",{staticStyle:{"text-align":"left"}},[s._v("实例")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("mongodump --host HOST_NAME --port PORT_NUMBER")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("该命令将备份所有 MongoDB 数据")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("mongodump --host runoob.com --port 27017")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("mongodump --dbpath DB_PATH --out BACKUP_DIRECTORY")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}}),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("mongodump --dbpath /data/db/ --out /data/backup/")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("mongodump --collection COLLECTION --db DB_NAME")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("该命令将备份指定数据库的集合。")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("mongodump --collection mycol --db test")])])])]),s._v(" "),a("p",[s._v("【示例】备份全量数据")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ mongodump "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" test2\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:55:58.086+0800    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" dumping test.company "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18801")]),s._v(" documents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:56:00.725+0800    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#############...........]  test.people  559101/1000000  (55.9%)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:56:03.725+0800    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###################.....]  test.people  829496/1000000  (82.9%)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:56:06.725+0800    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#####################...]  test.people  884614/1000000  (88.5%)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:56:08.088+0800    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("########################]  test.people  1000000/1000000  (100.0%)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:56:08.350+0800    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" dumping test.people "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000000")]),s._v(" documents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("【示例】备份指定数据库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mongodump "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" admin "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" test3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"数据恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据恢复"}},[s._v("#")]),s._v(" 数据恢复")]),s._v(" "),a("p",[s._v("mongodb 使用 "),a("code",[s._v("mongorestore")]),s._v(" 命令来恢复备份的数据。")]),s._v(" "),a("p",[a("code",[s._v("mongorestore")]),s._v(" 命令语法如下：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mongorestore "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("hostname"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(":port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" dbname "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[a("code",[s._v("--host <:port>")]),s._v(", "),a("code",[s._v("-h <:port>")]),s._v("：MongoDB 所在服务器地址，默认为： localhost:27017")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("--db")]),s._v(" , "),a("code",[s._v("-d")]),s._v(" ：需要恢复的数据库实例，例如：test，当然这个名称也可以和备份时候的不一样，比如 test2")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("--drop")]),s._v("：恢复的时候，先删除当前数据，然后恢复备份的数据。就是说，恢复后，备份后添加修改的数据都会被删除，慎用哦！")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("<path>")]),s._v("：mongorestore 最后的一个参数，设置备份数据所在位置，例如：c:\\data\\dump\\test。你不能同时指定 "),a("code",[s._v("<path>")]),s._v(" 和 "),a("code",[s._v("--dir")]),s._v(" 选项，"),a("code",[s._v("--dir")]),s._v(" 也可以设置备份目录。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("--dir")]),s._v("：指定备份的目录。你不能同时指定 "),a("code",[s._v("<path>")]),s._v(" 和 "),a("code",[s._v("--dir")]),s._v(" 选项。")])])]),s._v(" "),a("p",[s._v("【示例】")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ mongorestore "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--drop")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:46:16.053+0800    finished restoring test.tweets "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("966")]),s._v(" documents, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" failures"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:46:18.256+0800    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###.....................]  test.people  164MB/1.03GB  (15.6%)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:46:21.255+0800    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("########................]  test.people  364MB/1.03GB  (34.6%)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:46:24.256+0800    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("############............]  test.people  558MB/1.03GB  (53.0%)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:46:27.255+0800    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###############.........]  test.people  700MB/1.03GB  (66.5%)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:46:30.257+0800    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###################.....]  test.people  846MB/1.03GB  (80.3%)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:46:33.255+0800    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("######################..]  test.people  990MB/1.03GB  (94.0%)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:46:34.542+0800    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("########################]  test.people  1.03GB/1.03GB  (100.0%)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:46:34.543+0800    no indexes to restore\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:46:34.543+0800    finished restoring test.people "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000000")]),s._v(" documents, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" failures"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:46:34.544+0800    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000966")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" restored successfully. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" failed to restore.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"导入导出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入导出"}},[s._v("#")]),s._v(" 导入导出")]),s._v(" "),a("p",[a("code",[s._v("mongoimport")]),s._v(" 和 "),a("code",[s._v("mongoexport")]),s._v(" 并不能可靠地保存所有的富文本 BSON 数据类型，因为 JSON 仅能代表一种 BSON 支持的子集类型。因此，数据用这些工具导出导入或许会丢失一些精确程度。")]),s._v(" "),a("h3",{attrs:{id:"导入操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入操作"}},[s._v("#")]),s._v(" 导入操作")]),s._v(" "),a("p",[s._v("在 MongoDB 中，使用 "),a("code",[s._v("mongoimport")]),s._v(" 来导入数据。 默认情况下，"),a("code",[s._v("mongoimport")]),s._v(" 会将数据导入到本地主机端口 27017 上的 MongoDB 实例中。要将数据导入在其他主机或端口上运行的 MongoDB 实例中，请通过包含 "),a("code",[s._v("--host")]),s._v(" 和 "),a("code",[s._v("--port")]),s._v(" 选项来指定主机名或端口。 使用 "),a("code",[s._v("--drop")]),s._v(" 选项删除集合（如果已经存在）。 这样可以确保该集合仅包含您要导入的数据。")]),s._v(" "),a("p",[s._v("语法格式：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("mongoimport "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" IP "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" 端口 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" 用户名 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" 密码 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" 数据库 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" 表名 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--type")]),s._v(" 类型 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--headerline")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--upsert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--drop")]),s._v(" 文件名\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("【示例】导入表数据")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ mongoimport "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" book "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--drop")]),s._v(" test/book.dat\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T10:53:56.359+0800    connected to: mongodb://127.0.0.1:27017/\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T10:53:56.372+0800    dropping: test.book\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T10:53:56.628+0800    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("431")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" imported successfully. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" failed to import.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("【示例】从 json 文件中导入表数据")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ mongoimport "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" student "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--upsert")]),s._v(" test/student.json\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:02:55.907+0800    connected to: mongodb://127.0.0.1:27017/\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:02:56.068+0800    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" imported successfully. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" failed to import.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("【示例】从 csv 文件中导入表数据")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ mongoimport "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" product "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--type")]),s._v(" csv "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--headerline")]),s._v(" test/product.csv\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:07:49.788+0800    connected to: mongodb://127.0.0.1:27017/\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:07:51.051+0800    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" imported successfully. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" failed to import.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("【示例】导入部分表字段数据")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ mongoimport "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" product "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--type")]),s._v(" json "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--upsertFields")]),s._v(" name,price test/product.json\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:14:05.410+0800    connected to: mongodb://127.0.0.1:27017/\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T11:14:05.612+0800    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" imported successfully. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" failed to import.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"导出操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导出操作"}},[s._v("#")]),s._v(" 导出操作")]),s._v(" "),a("p",[s._v("语法格式：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mongoexport "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("IP"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("端口"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("密码"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("数据库"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("表名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("字段"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-q")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("条件导出"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--csv")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("文件名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("-f")]),s._v("：导出指字段，以逗号分割，"),a("code",[s._v("-f name,email,age")]),s._v(" 导出 name,email,age 这三个字段")]),s._v(" "),a("li",[a("code",[s._v("-q")]),s._v("：可以根查询条件导出，"),a("code",[s._v('-q \'{ "uid" : "100" }\'')]),s._v(" 导出 uid 为 100 的数据")]),s._v(" "),a("li",[a("code",[s._v("--csv")]),s._v("：表示导出的文件格式为 csv 的，这个比较有用，因为大部分的关系型数据库都是支持 csv，在这里有共同点")])]),s._v(" "),a("p",[s._v("【示例】导出整张表")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ mongoexport "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" product "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" test/product.dat\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T10:55:23.161+0800    connected to: mongodb://127.0.0.1:27017/\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T10:55:23.177+0800    exported "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" records\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("【示例】导出表到 json 文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ mongoexport "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" product "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--type")]),s._v(" json "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" test/product.json\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T10:49:52.735+0800    connected to: mongodb://127.0.0.1:27017/\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T10:49:52.750+0800    exported "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" records\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("【示例】导出表中部分字段到 csv 文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ mongoexport "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" product "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--type")]),s._v(" csv "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" name,price "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" test/product.csv\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T10:47:33.160+0800    connected to: mongodb://127.0.0.1:27017/\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-09-11T10:47:33.176+0800    exported "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" records\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.mongodb.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("MongoDB 官网"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/mongodb/mongo",target:"_blank",rel:"noopener noreferrer"}},[s._v("MongoDB Github"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://university.mongodb.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("MongoDB 官方免费教程"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.runoob.com/mongodb/mongodb-tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("MongoDB 教程"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);