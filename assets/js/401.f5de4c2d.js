(window.webpackJsonp=window.webpackJsonp||[]).push([[401],{718:function(a,s,t){"use strict";t.r(s);var e=t(7),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[a._v("#")]),a._v(" "),s("strong",[a._v("前言")])]),a._v(" "),s("ul",[s("li",[a._v("传统MySQL的主从模式天生地不能完全保证数据一致性。")]),a._v(" "),s("li",[a._v("PXC结构如图1-1，有3个几点，组成了一个MySQL集群。这3个节点与普通的主从架构不通，它们都可以作为主节点，这3个节点不分从属，是平等的关系。\n此方案无法解决海量数据场景的数据保存问题，既不能实现分库分表，但是提供了一个高冗余的环境，适合要求数据绝对安全的环境。")])]),a._v(" "),s("h1",{attrs:{id:"一、pxc集群方案与传统的replication复制方案的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、pxc集群方案与传统的replication复制方案的区别"}},[a._v("#")]),a._v(" 一、PXC集群方案与传统的Replication复制方案的区别")]),a._v(" "),s("ul",[s("li",[a._v("PXC集群方案所有节点都是可读可写的，Repkication从节点不能写入，因为主从同步是单向的，无法从slave节点向master节点同步。")]),a._v(" "),s("li",[a._v("PXC集群方案保证数据的强一致性，在一个事务的提交过程中，一个节点提交一个事务，必须其它所有节点通过这个事务请求，并且返回成功(OK)或者失败（conflict）信号之后才真正地提交返回结果给用户。")]),a._v(" "),s("li",[a._v("PXC同步机制是同步进行的，Replication同步机制是异步进行的。")])]),a._v(" "),s("h1",{attrs:{id:"二、pxc集群的优缺点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、pxc集群的优缺点"}},[a._v("#")]),a._v(" 二、PXC集群的优缺点")]),a._v(" "),s("ul",[s("li",[a._v("数据同步复制，几乎无延迟，基本上达到实时同步，在数据库挂掉后数据不会丢失。")]),a._v(" "),s("li",[a._v("多主复制，多个可同时读写节点，真正的多节点读写集群。")]),a._v(" "),s("li",[a._v("新加入的节点可以自动部署，Galera Cluster会自动拉取在线节点数据，无须提供手动备份，维护起来非常方便。")]),a._v(" "),s("li",[a._v("完全兼容MySQL,实现数据库高可用和数据强一致性，由于是多节点写入，因此数据库故障切换很容易。")])]),a._v(" "),s("h1",{attrs:{id:"三、pxc集群的局限性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、pxc集群的局限性"}},[a._v("#")]),a._v(" 三、PXC集群的局限性")]),a._v(" "),s("ul",[s("li",[a._v("只支持InnoDB存储引擎表，所有的表都必须要有主键，不然操作数据时会报错。")]),a._v(" "),s("li",[a._v("因为要保证数据的一致性，所以在多节点并发写的时候：锁冲突，死锁问题相对要多一些。")]),a._v(" "),s("li",[a._v("PXC集群采用的是强一致性原则，任何更新事务都需要全局验证通过才能在每个节点上执行，一个更改操作在所有节点都是成功的才算成功，写入的效率取决于集群中性能最差的节点，也就是所谓的短板效应。")]),a._v(" "),s("li",[a._v("新加入节点采用SST传输开销大，需要复制完整的数据。")]),a._v(" "),s("li",[a._v("存在写扩大的问题，所有节点都会发生写操作。")])]),a._v(" "),s("h1",{attrs:{id:"四、pxc有两种节点数据传输方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、pxc有两种节点数据传输方式"}},[a._v("#")]),a._v(" 四、PXC有两种节点数据传输方式")]),a._v(" "),s("ul",[s("li",[a._v("一种是SST全量传输（增量同步，有mysqldump, rsync, xtrabackup3种方法)")]),a._v(" "),s("li",[a._v("另一种是IST增量传输（xtrabackup）.")])]),a._v(" "),s("p",[a._v("备注：如果在生产环境中有一个新节点加入集群，此时有需要大量数据的SST传输，就有可能因此而拖垮整个集群性能，可以考虑先建立主从关系再加入集群。")]),a._v(" "),s("h1",{attrs:{id:"五、pxc大概会使用4个端口号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、pxc大概会使用4个端口号"}},[a._v("#")]),a._v(" 五、pxc大概会使用4个端口号")]),a._v(" "),s("ul",[s("li",[a._v("3306：数据库对外服务端口号。")]),a._v(" "),s("li",[a._v("4444：请求SST（SST指数据一个镜像传输）在新节点加入时候起作用。")]),a._v(" "),s("li",[a._v("4567：组成员之间进行沟通的一个端口号。")]),a._v(" "),s("li",[a._v("4568：传输IST用的，是相对于SST来说的一个增量，节点下线，重启加入是起作用。")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://www.yuyanqing.cn/oss/image-bed/snap/7794f0cb1f68681bb08d8d5ad12033a2.png",alt:"img"}})]),a._v(" "),s("h1",{attrs:{id:"六、pxc集群部署实战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#六、pxc集群部署实战"}},[a._v("#")]),a._v(" 六、PXC集群部署实战")]),a._v(" "),s("h2",{attrs:{id:"创建mysql网卡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建mysql网卡"}},[a._v("#")]),a._v(" 创建mysql网卡")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建MySQL集群的指定网段")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--subnet")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("172.19")]),a._v(".0.0/24 pxc\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看网卡的信息情况")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network inpsect pxc \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除网段")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" pxc\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("h1",{attrs:{id:"拉取镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[a._v("#")]),a._v(" 拉取镜像")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull percona/percona-xtradb-cluster:5.7.36\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" tag percona/percona-xtradb-cluster:5.7.36 pxc "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重命名镜像名字")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" rmi percona/percona-xtradb-cluster:5.7.36 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除原来的镜像")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h1",{attrs:{id:"搭建pxc集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建pxc集群"}},[a._v("#")]),a._v(" 搭建pxc集群")]),a._v(" "),s("p",[s("strong",[a._v("运行3个PXC容器命令参数说明:")])]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("参数")]),a._v(" "),s("th",[a._v("参数说明")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("MYSQL_ROOT_PASSWORD=root")]),a._v(" "),s("td",[a._v("设置数据库登录的密码")])]),a._v(" "),s("tr",[s("td",[a._v("CLUSTER_NAME PXC")]),a._v(" "),s("td",[a._v("集群名字")])]),a._v(" "),s("tr",[s("td",[a._v("XTRABACKUP_PASSWORD")]),a._v(" "),s("td",[a._v("数据库同步需要用到的密码")])]),a._v(" "),s("tr",[s("td",[a._v("–net=pxc")]),a._v(" "),s("td",[a._v("指定的网卡")])]),a._v(" "),s("tr",[s("td",[a._v("–ip 172.20.0.x")]),a._v(" "),s("td",[a._v("指定的ip地址")])]),a._v(" "),s("tr",[s("td",[a._v("CLUSTER_JOIN=pxc-master")]),a._v(" "),s("td",[a._v("从节点加入到集群环境中")])]),a._v(" "),s("tr",[s("td",[a._v("–privileged")]),a._v(" "),s("td",[a._v("修改表的权限")])])])]),a._v(" "),s("p",[s("strong",[a._v("创建映射目录")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[a._v("index")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("seq")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /opt/pxc/node-"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${index}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[s("strong",[a._v("创建第一个Master节点")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("13301")]),a._v(":3306 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /opt/pxc/node-1:/var/lib/mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Q1PhiW1F39Gx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CLUSTER_NAME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("PXC "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("XTRABACKUP_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Q1PhiW1F39Gx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--privileged")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pxc-master "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pxc "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--ip")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("172.19")]),a._v(".0.2 pxc\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 执行完后一定要等俩分钟初始化完成后才可以创建Salve（坑）")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" pxc-master "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入容器交互界面")]),a._v("\nmysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uroot")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pQ1PhiW1F39Gx")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 修改用户权限，允许远程登录，%代表任何ip地址都可以远程登录。")]),a._v("\nuse mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\ndelete from user where "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'localhost'")]),a._v(" and user "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'root'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nFLUSH PRIVILEGES"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("p",[s("strong",[a._v("创建第一个Salve节点: 注意 "),s("code",[a._v("-e CLUSTER_JOIN=pxc-master")])])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("13302")]),a._v(":3306 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /opt/pxc/node-2:/var/lib/mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Q1PhiW1F39Gx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CLUSTER_NAME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("PXC "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("XTRABACKUP_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Q1PhiW1F39Gx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CLUSTER_JOIN")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pxc-master "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--privileged")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pxc-salve1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pxc "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--ip")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("172.19")]),a._v(".0.3 pxc\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("strong",[a._v("创建第二个Salve节点: 注意 "),s("code",[a._v("-e CLUSTER_JOIN=pxc-master")])])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("13303")]),a._v(":3306 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /opt/pxc/node-3:/var/lib/mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Q1PhiW1F39Gx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CLUSTER_NAME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("PXC "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("XTRABACKUP_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Q1PhiW1F39Gx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CLUSTER_JOIN")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pxc-master "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--privileged")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pxc-salve2 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pxc "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--ip")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("172.19")]),a._v(".0.4 pxc\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"容器批量操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器批量操作"}},[a._v("#")]),a._v(" 容器批量操作")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"pxc-*"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $1}'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("xargs")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 批量停止pxc")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"pxc-*"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $1}'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("xargs")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 批量删除pxc容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rf")]),a._v(" /opt/pxc/pxc--"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);