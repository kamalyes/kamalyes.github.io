(window.webpackJsonp=window.webpackJsonp||[]).push([[577],{891:function(s,a,t){"use strict";t.r(a);var e=t(7),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"zookeeper-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper-命令"}},[s._v("#")]),s._v(" ZooKeeper 命令")]),s._v(" "),a("blockquote",[a("p",[s._v("ZooKeeper 命令用于在 ZooKeeper 服务上执行操作。")])]),s._v(" "),a("h2",{attrs:{id:"启动服务和启动命令行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动服务和启动命令行"}},[s._v("#")]),s._v(" 启动服务和启动命令行")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务")]),s._v("\nbin/zkServer.sh start\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动命令行，不指定服务地址则默认连接到localhost:2181")]),s._v("\nbin/zkCli.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-server")]),s._v(" hadoop001:2181\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"查看节点列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看节点列表"}},[s._v("#")]),s._v(" 查看节点列表")]),s._v(" "),a("h3",{attrs:{id:"ls-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ls-命令"}},[s._v("#")]),s._v(" "),a("code",[s._v("ls")]),s._v(" 命令")]),s._v(" "),a("p",[a("code",[s._v("ls")]),s._v(" 命令用于查看某个路径下目录列表。")]),s._v(" "),a("p",[s._v("【语法】")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" path\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("说明：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("path")]),s._v("：代表路径。")])])]),s._v(" "),a("p",[s._v("【示例】")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[zk: localhost:2181(CONNECTED) 0] ls /\n[cluster, controller_epoch, brokers, storm, zookeeper, admin,  ...]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"ls2-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ls2-命令"}},[s._v("#")]),s._v(" "),a("code",[s._v("ls2")]),s._v(" 命令")]),s._v(" "),a("p",[a("code",[s._v("ls2")]),s._v(" 命令用于查看某个路径下目录列表，它比 ls 命令列出更多的详细信息。")]),s._v(" "),a("p",[s._v("【语法】")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ls2 path\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("说明：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("path")]),s._v("：代表路径。")])])]),s._v(" "),a("p",[s._v("【示例】")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" ls2 /\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cluster, controller_epoch, brokers, storm, zookeeper, admin, "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ncZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x0\nctime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Thu Jan 01 08:00:00 CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1970")]),s._v("\nmZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x0\nmtime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Thu Jan 01 08:00:00 CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1970")]),s._v("\npZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x130\ncversion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("\ndataVersion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\naclVersion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nephemeralOwner "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x0\ndataLength "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nnumChildren "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"节点的增删改查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#节点的增删改查"}},[s._v("#")]),s._v(" 节点的增删改查")]),s._v(" "),a("h3",{attrs:{id:"get-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-命令"}},[s._v("#")]),s._v(" "),a("code",[s._v("get")]),s._v(" 命令")]),s._v(" "),a("p",[a("code",[s._v("get")]),s._v(" 命令用于获取节点数据和状态信息。")]),s._v(" "),a("p",[s._v("【语法】")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("get path [watch]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("说明：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("path")]),s._v("：代表路径。")]),s._v(" "),a("li",[a("strong",[s._v("[watch]")]),s._v("：对节点进行事件监听。")])])]),s._v(" "),a("p",[s._v("【示例】")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" get /hadoop\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#节点数据")]),s._v("\ncZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x14b\nctime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Fri May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":03:06 CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\nmZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x14b\nmtime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Fri May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":03:06 CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\npZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x14b\ncversion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndataVersion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\naclVersion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nephemeralOwner "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x0\ndataLength "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\nnumChildren "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("blockquote",[a("p",[s._v("说明：")]),s._v(" "),a("p",[s._v("节点各个属性如下表。其中一个重要的概念是 Zxid(ZooKeeper Transaction Id)，ZooKeeper 节点的每一次更改都具有唯一的 Zxid，如果 Zxid1 小于 Zxid2，则 Zxid1 的更改发生在 Zxid2 更改之前。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("strong",[s._v("状态属性")])]),s._v(" "),a("th",[a("strong",[s._v("说明")])])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("cZxid")]),s._v(" "),a("td",[s._v("数据节点创建时的事务 ID")])]),s._v(" "),a("tr",[a("td",[s._v("ctime")]),s._v(" "),a("td",[s._v("数据节点创建时的时间")])]),s._v(" "),a("tr",[a("td",[s._v("mZxid")]),s._v(" "),a("td",[s._v("数据节点最后一次更新时的事务 ID")])]),s._v(" "),a("tr",[a("td",[s._v("mtime")]),s._v(" "),a("td",[s._v("数据节点最后一次更新时的时间")])]),s._v(" "),a("tr",[a("td",[s._v("pZxid")]),s._v(" "),a("td",[s._v("数据节点的子节点最后一次被修改时的事务 ID")])]),s._v(" "),a("tr",[a("td",[s._v("cversion")]),s._v(" "),a("td",[s._v("子节点的更改次数")])]),s._v(" "),a("tr",[a("td",[s._v("dataVersion")]),s._v(" "),a("td",[s._v("节点数据的更改次数")])]),s._v(" "),a("tr",[a("td",[s._v("aclVersion")]),s._v(" "),a("td",[s._v("节点的 ACL 的更改次数")])]),s._v(" "),a("tr",[a("td",[s._v("ephemeralOwner")]),s._v(" "),a("td",[s._v("如果节点是临时节点，则表示创建该节点的会话的 SessionID；如果节点是持久节点，则该属性值为 0")])]),s._v(" "),a("tr",[a("td",[s._v("dataLength")]),s._v(" "),a("td",[s._v("数据内容的长度")])]),s._v(" "),a("tr",[a("td",[s._v("numChildren")]),s._v(" "),a("td",[s._v("数据节点当前的子节点个数")])])])])]),s._v(" "),a("h3",{attrs:{id:"stat-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stat-命令"}},[s._v("#")]),s._v(" "),a("code",[s._v("stat")]),s._v(" 命令")]),s._v(" "),a("p",[a("code",[s._v("stat")]),s._v(" 命令用于查看节点状态信息。它的返回值和 "),a("code",[s._v("get")]),s._v(" 命令类似，但不会返回节点数据。")]),s._v(" "),a("p",[s._v("【语法】")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("stat path [watch]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("path")]),s._v("：代表路径。")]),s._v(" "),a("li",[a("strong",[s._v("[watch]")]),s._v("：对节点进行事件监听。")])]),s._v(" "),a("p",[s._v("【示例】")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stat")]),s._v(" /hadoop\ncZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x14b\nctime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Fri May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":03:06 CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\nmZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x14b\nmtime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Fri May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":03:06 CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\npZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x14b\ncversion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndataVersion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\naclVersion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nephemeralOwner "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x0\ndataLength "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\nnumChildren "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"create-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-命令"}},[s._v("#")]),s._v(" "),a("code",[s._v("create")]),s._v(" 命令")]),s._v(" "),a("p",[a("code",[s._v("create")]),s._v(" 命令用于创建节点并赋值。")]),s._v(" "),a("p",[s._v("【语法】")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("create "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" path data acl\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("说明：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("[-s][-e]")]),s._v("：-s 和 -e 都是可选的，-s 代表顺序节点，-e 代表临时节点，注意其中 -s 和 -e 可以同时使用的，并且临时节点不能再创建子节点。\n"),a("ul",[a("li",[s._v("默认情况下，所有 znode 都是持久的。")]),s._v(" "),a("li",[s._v("顺序节点保证 znode 路径将是唯一的。")]),s._v(" "),a("li",[s._v("临时节点会在会话过期或客户端断开连接时被自动删除。")])])]),s._v(" "),a("li",[a("strong",[s._v("path")]),s._v("：指定要创建节点的路径，比如 "),a("strong",[s._v("/hadoop")]),s._v("。")]),s._v(" "),a("li",[a("strong",[s._v("data")]),s._v("：要在此节点存储的数据。")]),s._v(" "),a("li",[a("strong",[s._v("acl")]),s._v("：访问权限相关，默认是 world，相当于全世界都能访问。")])])]),s._v(" "),a("p",[s._v("【示例】创建持久节点")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" create /hadoop "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\nCreated /hadoop\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("【示例】创建有序节点，此时创建的节点名为指定节点名 + 自增序号：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /a  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aaa"')]),s._v("\nCreated /a0000000022\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /b  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bbb"')]),s._v("\nCreated /b0000000023\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /c  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ccc"')]),s._v("\nCreated /c0000000024\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("【示例】创建临时节点：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" /tmp  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tmp"')]),s._v("\nCreated /tmp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"set-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-命令"}},[s._v("#")]),s._v(" "),a("code",[s._v("set")]),s._v(" 命令")]),s._v(" "),a("p",[a("code",[s._v("set")]),s._v(" 命令用于修改节点存储的数据。")]),s._v(" "),a("p",[s._v("【语法】")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("set path data [version]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("说明：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("path")]),s._v("：节点路径。")]),s._v(" "),a("li",[a("strong",[s._v("data")]),s._v("：需要存储的数据。")]),s._v(" "),a("li",[a("strong",[s._v("[version]")]),s._v("：可选项，版本号(可用作乐观锁)。")])])]),s._v(" "),a("p",[s._v("【示例】")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" /hadoop "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("345")]),s._v("\ncZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x14b\nctime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Fri May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":03:06 CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\nmZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x14c\nmtime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Fri May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":13:05 CST "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("\npZxid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x14b\ncversion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndataVersion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意更改后此时版本号为 1，默认创建时为 0")]),s._v("\naclVersion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nephemeralOwner "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 0x0\ndataLength "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nnumChildren "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("也可以基于版本号进行更改，此时类似于乐观锁机制，当你传入的数据版本号 (dataVersion) 和当前节点的数据版本号不符合时，zookeeper 会拒绝本次修改：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" /hadoop "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("678")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nversion No is not valid "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" /hadoop    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#无效的版本号")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"delete-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delete-命令"}},[s._v("#")]),s._v(" "),a("code",[s._v("delete")]),s._v(" 命令")]),s._v(" "),a("p",[a("code",[s._v("delete")]),s._v(" 命令用于删除某节点。")]),s._v(" "),a("p",[s._v("【语法】")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("delete path [version]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("说明：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("path")]),s._v("：节点路径。")]),s._v(" "),a("li",[a("strong",[s._v("[version]")]),s._v("：可选项，版本号（同 set 命令）。和更新节点数据一样，也可以传入版本号，当你传入的数据版本号 (dataVersion) 和当前节点的数据版本号不符合时，zookeeper 不会执行删除操作。")])])]),s._v(" "),a("p",[s._v("【示例】")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" delete /hadoop "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nversion No is not valid "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" /hadoop   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#无效的版本号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" delete /hadoop "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("code",[s._v("delete")]),s._v(" 命令不能删除带有子节点的节点。如果想要删除节点及其子节点，可以使用 "),a("code",[s._v("deleteall path")])]),s._v(" "),a("h2",{attrs:{id:"监听器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监听器"}},[s._v("#")]),s._v(" 监听器")]),s._v(" "),a("p",[s._v("针对每个节点的操作，都会有一个监听者（watcher）。")]),s._v(" "),a("ul",[a("li",[s._v("当监听的某个对象（znode）发生了变化，则触发监听事件。")]),s._v(" "),a("li",[s._v("zookeeper 中的监听事件是一次性的，触发后立即销毁。")]),s._v(" "),a("li",[s._v("父节点，子节点的增删改都能够触发其监听者（watcher）")]),s._v(" "),a("li",[s._v("针对不同类型的操作，触发的 watcher 事件也不同：\n"),a("ul",[a("li",[s._v("父节点 Watcher 事件\n"),a("ul",[a("li",[s._v("创建父节点触发：NodeCreated")]),s._v(" "),a("li",[s._v("修改节点数据触发：NodeDatachanged")]),s._v(" "),a("li",[s._v("删除节点数据触发：NodeDeleted")])])]),s._v(" "),a("li",[s._v("子节点 Watcher 事件\n"),a("ul",[a("li",[s._v("创建子节点触发：NodeChildrenChanged")]),s._v(" "),a("li",[s._v("删除子节点触发：NodeChildrenChanged")]),s._v(" "),a("li",[s._v("修改子节点不触发事件")])])])])])]),s._v(" "),a("h3",{attrs:{id:"get-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-path"}},[s._v("#")]),s._v(" get path")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("get path -w")]),s._v(" 注册的监听器能够在节点内容发生改变的时候，向客户端发出通知。需要注意的是 zookeeper 的触发器是一次性的 (One-time trigger)，即触发一次后就会立即失效。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" get /hadoop "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" /hadoop "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("45678")]),s._v("\nWATCHER::\nWatchedEvent state:SyncConnected type:NodeDataChanged path:/hadoop  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#节点值改变")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("get path [watch] 在当前版本已废弃")])]),s._v(" "),a("h3",{attrs:{id:"stat-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stat-path"}},[s._v("#")]),s._v(" stat path")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("stat path -w")]),s._v(" 注册的监听器能够在节点状态发生改变的时候，向客户端发出通知。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stat")]),s._v(" path "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" /hadoop "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("112233")]),s._v("\nWATCHER::\nWatchedEvent state:SyncConnected type:NodeDataChanged path:/hadoop  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#节点值改变")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("stat path [watch] 在当前版本已废弃")])]),s._v(" "),a("h3",{attrs:{id:"ls-ls2-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ls-ls2-path"}},[s._v("#")]),s._v(" ls\\ls2 path")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("ls path -w")]),s._v(" 或 "),a("code",[s._v("ls2 path -w")]),s._v(" 注册的监听器能够监听该节点下所有"),a("strong",[s._v("子节点")]),s._v("的增加和删除操作。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /hadoop "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" create  /hadoop/yarn "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aaa"')]),s._v("\nWATCHER::\nWatchedEvent state:SyncConnected type:NodeChildrenChanged path:/hadoop\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[s._v("ls path [watch] 和 ls2 path [watch] 在当前版本已废弃")])]),s._v(" "),a("h2",{attrs:{id:"辅助命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#辅助命令"}},[s._v("#")]),s._v(" 辅助命令")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("help")]),s._v(" 可以查看所有命令帮助信息。")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("history")]),s._v(" 可以查看最近 10 条历史记录。")]),s._v(" "),a("h2",{attrs:{id:"zookeeper-四字命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper-四字命令"}},[s._v("#")]),s._v(" zookeeper 四字命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("功能描述")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("conf")]),s._v(" "),a("td",[s._v("打印服务配置的详细信息。")])]),s._v(" "),a("tr",[a("td",[s._v("cons")]),s._v(" "),a("td",[s._v("列出连接到此服务器的所有客户端的完整连接/会话详细信息。包括接收/发送的数据包数量，会话 ID，操作延迟，上次执行的操作等信息。")])]),s._v(" "),a("tr",[a("td",[s._v("dump")]),s._v(" "),a("td",[s._v("列出未完成的会话和临时节点。这只适用于 Leader 节点。")])]),s._v(" "),a("tr",[a("td",[s._v("envi")]),s._v(" "),a("td",[s._v("打印服务环境的详细信息。")])]),s._v(" "),a("tr",[a("td",[s._v("ruok")]),s._v(" "),a("td",[s._v("测试服务是否处于正确状态。如果正确则返回“imok”，否则不做任何相应。")])]),s._v(" "),a("tr",[a("td",[s._v("stat")]),s._v(" "),a("td",[s._v("列出服务器和连接客户端的简要详细信息。")])]),s._v(" "),a("tr",[a("td",[s._v("wchs")]),s._v(" "),a("td",[s._v("列出所有 watch 的简单信息。")])]),s._v(" "),a("tr",[a("td",[s._v("wchc")]),s._v(" "),a("td",[s._v("按会话列出服务器 watch 的详细信息。")])]),s._v(" "),a("tr",[a("td",[s._v("wchp")]),s._v(" "),a("td",[s._v("按路径列出服务器 watch 的详细信息。")])])])]),s._v(" "),a("blockquote",[a("p",[s._v("更多四字命令可以参阅官方文档："),a("a",{attrs:{href:"https://zookeeper.apache.org/doc/current/zookeeperAdmin.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://zookeeper.apache.org/doc/current/zookeeperAdmin.html"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("使用前需要使用 "),a("code",[s._v("yum install nc")]),s._v(" 安装 nc 命令，使用示例如下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@hadoop001 bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo stat | nc localhost 2181")]),s._v("\nZookeeper version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),s._v(".13-2d71af4dbe22557fda74f9a9b4309b15a7487f03,\nbuilt on 06/29/2018 04:05 GMT\nClients:\n /0:0:0:0:0:0:0:1:50584"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("queued"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",recved"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("371")]),s._v(",sent"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("371")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n /0:0:0:0:0:0:0:1:50656"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("queued"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",recved"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(",sent"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nLatency min/avg/max: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/0/19\nReceived: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("372")]),s._v("\nSent: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("371")]),s._v("\nConnections: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nOutstanding: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nZxid: 0x150\nMode: standalone\nNode count: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("167")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.runoob.com/w3cnote/zookeeper-bs-command.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Zookeeper 客户端基础命令使用"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);