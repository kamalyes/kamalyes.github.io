(window.webpackJsonp=window.webpackJsonp||[]).push([[337],{654:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"docker-镜像-commit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-镜像-commit"}},[t._v("#")]),t._v(" Docker 镜像 commit")]),t._v(" "),s("h2",{attrs:{id:"操作命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作命令"}},[t._v("#")]),t._v(" 操作命令")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('docker commit 提交容器副本使之成为一个新的镜像\ndocker commit -m="提交的描述信息" -a="作者" 容器ID  要创建的目标镜像名：[标签名]\n\n//在本机通过8888端口启动访问tomcat（也可以使用8080端口，此时为了区分改为8888端口）\ndocker run -it -p 8888:8080 tomcat\n//此命令执行后在本机的浏览器中输入localhost：8888会出现tomcat的页面，表示执行成功\n\n//使用随机端口访问tomcat\ndocker run -it -P tomcat\n//此命令执行后，可以使用 docker ps 命令查看tomcat的端口，然后在浏览器中输入localhost：查看到的tomcat的端口(例如，我的是32768),然后会出现tomcat的页面，表示执行成功\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h2",{attrs:{id:"案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#案例"}},[t._v("#")]),t._v(" 案例：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('1.从Hub上下载一个tomcat镜像到本地并成功运行\n\tdocker run -it -p 8888:8080 tomcat\n\n2.故意删除上一步镜像生产tomcat容器的文档\n    //进入上一步运行的tomcat容器\n    docker exec -it 887d30854855 /bin/bash  //887d30854855为容器ID\n    ls -l //查看当前目录下的目录，可以看到有一个目录为webapps\n    cd webapps  //进入webapps此目录\n    ls  //查看当前目录下的文件，可以看到有一个docs文件\n    rm -rf docs  //删除docs此文件\n//通过浏览器访问 localhost:8888 ，出现tomcat的页面，点击Documentation，此时会出现404页面，表示删除docs文件成功\n\n3.当前的tomcat运行实例是一个没有说明文档的容器，以它为模板commit一个没有docs的tomcat新镜像 test/mytomcat01\n    docker commit -a="gg" -m="tomcat without docs" 887d30854855 test/mytomcat01:1.2  //此时的 :1.2 表示是1.2版本 ,test/mytomcat01是对新镜像的命名\n    docker ps  //可以看到两个tomcat，其中一个是从阿里云下载的，另外一个是自己刚才commit的，是没有说明文档的\n\n4.启动新的镜像并和原来的镜像进行对比\n\tdocker run -it -p 7777:8080  test/mytomcat01:1.2\n\t//以7777端口启动自己提交的tomcat容器，通过浏览器访问localhost:7777，出现tomcat的页面，点击Documentation，此时会出现404页面，表示访问的是自己提交的tomcat容器\n\tdocker run -it -p 7788:8080  tomcat\n\t//以7788端口启动tomcat容器，通过浏览器访问localhost:7788，出现tomcat的页面，点击Documentation，出现正常的说明文档，表示访问的是从阿里云下载的tomcat容器\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);