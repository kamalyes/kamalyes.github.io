(window.webpackJsonp=window.webpackJsonp||[]).push([[796],{1110:function(a,t,e){"use strict";e.r(t);var r=e(7),s=Object(r.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"hbase"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hbase"}},[a._v("#")]),a._v(" HBase")]),a._v(" "),t("h2",{attrs:{id:"简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[a._v("#")]),a._v(" 简介")]),a._v(" "),t("p",[a._v("HBase 是建立在 HDFS 基础上的面向列的分布式数据库。")]),a._v(" "),t("ul",[t("li",[a._v("HBase 参考了谷歌的 BigTable 建模，实现的编程语言为 Java。")]),a._v(" "),t("li",[a._v("它是 Hadoop 项目的子项目，运行于 HDFS 文件系统之上。")])]),a._v(" "),t("p",[a._v("HBase 适用场景：实时地随机访问超大数据集。")]),a._v(" "),t("p",[a._v("在 "),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/CAP%E5%AE%9A%E7%90%86",target:"_blank",rel:"noopener noreferrer"}},[a._v("CAP 理论"),t("OutboundLink")],1),a._v("中，HBase 属于 CP 类型的系统。")]),a._v(" "),t("h2",{attrs:{id:"基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础"}},[a._v("#")]),a._v(" 基础")]),a._v(" "),t("p",[t("RouterLink",{attrs:{to:"/08.数据库/06.列式数据库/HBase运维.html"}},[a._v("HBase 维护")])],1),a._v(" "),t("h2",{attrs:{id:"原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[a._v("#")]),a._v(" 原理")]),a._v(" "),t("h3",{attrs:{id:"数据模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据模型"}},[a._v("#")]),a._v(" 数据模型")]),a._v(" "),t("p",[a._v("HBase 是一个面向列的数据库，在表中它由行排序。")]),a._v(" "),t("p",[a._v("HBase 表模型结构为：")]),a._v(" "),t("ul",[t("li",[a._v("表（table）是行的集合。")]),a._v(" "),t("li",[a._v("行（row）是列族的集合。")]),a._v(" "),t("li",[a._v("列族（column family）是列的集合。")]),a._v(" "),t("li",[a._v("列（row）是键值对的集合。")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://www.yuyanqing.cn/oss/image-bed/col/bigdata/hbase/1551164163369.png",alt:"img"}})]),a._v(" "),t("p",[a._v("HBase 表的单元格（cell）由行和列的坐标交叉决定，是有版本的。默认情况下，版本号是自动分配的，为 HBase 插入单元格时的时间戳。单元格的内容是未解释的字节数组。")]),a._v(" "),t("p",[a._v("行的键也是未解释的字节数组，所以理论上，任何数据都可以通过序列化表示成字符串或二进制，从而存为 HBase 的键值。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://www.yuyanqing.cn/oss/image-bed/col/bigdata/hbase/1551164224778.png",alt:"img"}})]),a._v(" "),t("h3",{attrs:{id:"hbase-架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hbase-架构"}},[a._v("#")]),a._v(" HBase 架构")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://www.yuyanqing.cn/oss/image-bed/col/bigdata/hbase/1551164744748.png",alt:"img"}})]),a._v(" "),t("p",[a._v("和 HDFS、YARN 一样，HBase 也采用 master / slave 架构：")]),a._v(" "),t("ul",[t("li",[a._v("HBase 有一个 master 节点。master 节点负责将区域（region）分配给 region 节点；恢复 region 节点的故障。")]),a._v(" "),t("li",[a._v("HBase 有多个 region 节点。region 节点负责零个或多个区域（region）的管理并相应客户端的读写请求。region 节点还负责区域的划分并通知 master 节点有了新的子区域。")])]),a._v(" "),t("p",[a._v("HBase 依赖 ZooKeeper 来实现故障恢复。")]),a._v(" "),t("h4",{attrs:{id:"regin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#regin"}},[a._v("#")]),a._v(" Regin")]),a._v(" "),t("p",[a._v("HBase 表按行键范围水平自动划分为区域（region）。每个区域由表中行的子集构成。每个区域由它所属的表、它所含的第一行及最后一行来表示。")]),a._v(" "),t("p",[t("strong",[a._v("区域只不过是表被拆分，并分布在区域服务器。")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://www.yuyanqing.cn/oss/image-bed/col/bigdata/hbase/1551165887616.png",alt:"img"}})]),a._v(" "),t("h4",{attrs:{id:"master-服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#master-服务器"}},[a._v("#")]),a._v(" Master 服务器")]),a._v(" "),t("p",[a._v("区域分配、DDL(create、delete)操作由 HBase master 服务器处理。")]),a._v(" "),t("ul",[t("li",[a._v("master 服务器负责协调 region 服务器\n"),t("ul",[t("li",[a._v("协助区域启动，出现故障恢复或负载均衡情况时，重新分配 region 服务器")]),a._v(" "),t("li",[a._v("监控集群中的所有 region 服务器")])])]),a._v(" "),t("li",[a._v("支持 DDL 接口（创建、删除、更新表）")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://www.yuyanqing.cn/oss/image-bed/col/bigdata/hbase/1551166513572.png",alt:"img"}})]),a._v(" "),t("h4",{attrs:{id:"regin-服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#regin-服务器"}},[a._v("#")]),a._v(" Regin 服务器")]),a._v(" "),t("p",[a._v("区域服务器运行在 HDFS 数据节点上，具有以下组件")]),a._v(" "),t("ul",[t("li",[t("p",[t("code",[a._v("WAL")]),a._v(" - Write Ahead Log 是 HDFS 上的文件。WAL 存储尚未持久存储到永久存储的新数据，它用于在发生故障时进行恢复。")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("BlockCache")]),a._v(" - 是读缓存。它将频繁读取的数据存储在内存中。至少最近使用的数据在完整时被逐出。")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("MemStore")]),a._v(" - 是写缓存。它存储尚未写入磁盘的新数据。在写入磁盘之前对其进行排序。每个区域每个列族有一个 MemStore。")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("Hfiles")]),a._v(" - 将行存储为磁盘上的排序键值对。")])])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://www.yuyanqing.cn/oss/image-bed/col/bigdata/hbase/1551166602999.png",alt:"img"}})]),a._v(" "),t("h4",{attrs:{id:"zookeeper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper"}},[a._v("#")]),a._v(" ZooKeeper")]),a._v(" "),t("p",[a._v("HBase 使用 ZooKeeper 作为分布式协调服务来维护集群中的服务器状态。Zookeeper 维护哪些服务器是活动的和可用的，并提供服务器故障通知。集群至少应该有 3 个节点。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://www.yuyanqing.cn/oss/image-bed/col/bigdata/hbase/1551166447147.png",alt:"img"}})]),a._v(" "),t("h2",{attrs:{id:"hbase-和-rdbms"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hbase-和-rdbms"}},[a._v("#")]),a._v(" HBase 和 RDBMS")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("HBase")]),a._v(" "),t("th",[a._v("RDBMS")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("HBase 无模式，它不具有固定列模式的概念;仅定义列族。")]),a._v(" "),t("td",[a._v("RDBMS 有它的模式，描述表的整体结构的约束。")])]),a._v(" "),t("tr",[t("td",[a._v("它专门创建为宽表。 HBase 是横向扩展。")]),a._v(" "),t("td",[a._v("这些都是细而专为小表。很难形成规模。")])]),a._v(" "),t("tr",[t("td",[a._v("没有任何事务存在于 HBase。")]),a._v(" "),t("td",[a._v("RDBMS 是事务性的。")])]),a._v(" "),t("tr",[t("td",[a._v("它反规范化的数据。")]),a._v(" "),t("td",[a._v("它具有规范化的数据。")])]),a._v(" "),t("tr",[t("td",[a._v("它用于半结构以及结构化数据是非常好的。")]),a._v(" "),t("td",[a._v("用于结构化数据非常好。")])])])]),a._v(" "),t("h2",{attrs:{id:"api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[a._v("#")]),a._v(" API")]),a._v(" "),t("p",[a._v("Java API 归纳总结在这里："),t("RouterLink",{attrs:{to:"/08.数据库/06.列式数据库/hbase-api-java.html"}},[a._v("HBase 应用")])],1),a._v(" "),t("h2",{attrs:{id:"附录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附录"}},[a._v("#")]),a._v(" 附录")]),a._v(" "),t("h3",{attrs:{id:"命令行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令行"}},[a._v("#")]),a._v(" 命令行")]),a._v(" "),t("p",[a._v("HBase 命令行可以参考这里："),t("RouterLink",{attrs:{to:"/08.数据库/06.列式数据库/HBase命令.html"}},[a._v("HBase 命令行")])],1),a._v(" "),t("h2",{attrs:{id:"更多内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更多内容"}},[a._v("#")]),a._v(" 更多内容")]),a._v(" "),t("h3",{attrs:{id:"扩展阅读"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#扩展阅读"}},[a._v("#")]),a._v(" 扩展阅读")]),a._v(" "),t("ul",[t("li",[t("RouterLink",{attrs:{to:"/08.数据库/06.列式数据库/HBase命令.html"}},[a._v("HBase 命令")])],1),a._v(" "),t("li",[t("RouterLink",{attrs:{to:"/08.数据库/06.列式数据库/HBase运维.html"}},[a._v("HBase 运维")])],1)]),a._v(" "),t("h3",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[a._v("#")]),a._v(" 参考资料")]),a._v(" "),t("h4",{attrs:{id:"官方"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官方"}},[a._v("#")]),a._v(" 官方")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"http://hbase.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("HBase 官网"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://hbase.apache.org/book.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("HBase 官方文档"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"http://abloz.com/hbase/book.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("HBase 官方文档中文版"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://hbase.apache.org/apidocs/index.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("HBase API"),t("OutboundLink")],1)])]),a._v(" "),t("h4",{attrs:{id:"文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文章"}},[a._v("#")]),a._v(" 文章")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://static.googleusercontent.com/media/research.google.com/zh-CN//archive/bigtable-osdi06.pdf",target:"_blank",rel:"noopener noreferrer"}},[a._v("Bigtable: A Distributed Storage System for Structured Data"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://mapr.com/blog/in-depth-look-hbase-architecture",target:"_blank",rel:"noopener noreferrer"}},[a._v("An In-Depth Look at the HBase Architecture"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=s.exports}}]);