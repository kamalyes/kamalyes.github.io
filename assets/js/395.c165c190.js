(window.webpackJsonp=window.webpackJsonp||[]).push([[395],{710:function(s,n,a){"use strict";a.r(n);var e=a(7),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("ol",[n("li",[s._v("创建"),n("code",[s._v("docker-compose")]),s._v("文件")])]),s._v(" "),n("div",{staticClass:"language-docker line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-docker"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#elk集群配置文件")]),s._v('\nversion: "3.3"\nservices:\n  '),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#######################elasticsearch集群配置################")]),s._v("\n  es01:\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#镜像名称")]),s._v("\n    image: elasticsearch:${ES_VERSION}\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#容器名称")]),s._v("\n    container_name: ${CLUSTER_NAME}-es01\n    hostname: es01\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开机自启动")]),s._v("\n    restart: always\n    privileged: true\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#环境变量设置")]),s._v("\n    environment:\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#节点名称")]),s._v("\n      - node.name=es01\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#集群名称")]),s._v("\n      - cluster.name=${CLUSTER_NAME}-es01\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#其它节点")]),s._v("\n      - cluster.initial_master_nodes=es01\n      - bootstrap.memory_lock=true\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#加入跨域配置")]),s._v("\n      - http.cors.enabled=true\n      - http.cors.allow-origin=*\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#java堆内存大小设置")]),s._v('\n      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"\n      '),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启读写权限")]),s._v('\n      - "TAKE_FILE_OWNERSHIP=true"\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n    '),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#数据卷映射")]),s._v("\n    volumes:\n      - ${BASE}/es01/conf/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml\n      - ${BASE}/es01/data:/usr/share/elasticsearch/data\n      - ${BASE}/es01/logs:/usr/share/elasticsearch/logs\n      - ${BASE}/es01/plugins:/usr/share/elasticsearch/plugins\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#端口映射")]),s._v("\n    ports:\n      - ${ES_PORT}:9200\n      - 9300:9300\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#网络配置")]),s._v("\n    networks:\n      - elk\n      \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#####################kibana配置####################################")]),s._v("\n  kibana:\n    image: kibana:${KIBANA_VERSION}\n    container_name: ${CLUSTER_NAME}-kibana\n    hostname: kibana\n    restart: always\n    environment:\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#kibana语言配置：en、zh-CN、ja-JP")]),s._v('\n      I18N_LOCALE: "zh-CN"\n      '),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#elasticsearch服务地址")]),s._v('\n      - elasticsearch.url="http://${NET_URL}:${ES_PORT}"\n      - ELASTICSEARCH_USERNAME=${ELASTICSEARCH_USERNAME}\n      - ELASTICSEARCH_PASSWORD=${ELASTICSEARCH_PASSWORD}\n    '),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#数据卷映射")]),s._v("\n    volumes:\n      - ${BASE}/es01/conf/kibana.yml:/usr/share/kibana/config/kibana.yml\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#端口映射")]),s._v("\n    ports:\n      - 5601:5601\n    networks:\n      - elk\n    depends_on:\n      - es01\n      \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#####################logstash配置####################################")]),s._v("\n  logstash:\n    image: logstash:${LOGSTASH_VERSION}\n    container_name: ${CLUSTER_NAME}-logstash\n    hostname: logstash\n    restart: always\n    environment:\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#elasticsearch服务地址")]),s._v('\n      - monitoring.elasticsearch.hosts= "http://${NET_URL}:${ES_PORT}"\n    volumes:  #映射本地和远程文件，后面要修改配置文件，只需要需要本地配置文件 重启应用生效\n      - ${BASE}/es01/conf/:/usr/share/logstash/config/\n      - ${BASE}/es01/pipeline/:/usr/share/logstash/pipeline/\n      - ${BASE}/es01/jars/:/usr/share/logstash/logstash-core/lib/jars/\n    ports:\n      - 9600:9600\n      - 5044:5044\n    networks:\n      - elk\n    depends_on:\n      - es01\n\nnetworks:\n  elk:\n    external: true\n    driver: bridge\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br")])]),n("p",[s._v("2.创建"),n("code",[s._v(".env")]),s._v("文件")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ES Account Password")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ELASTICSEARCH_USERNAME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("elastic_system\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ELASTICSEARCH_PASSWORD")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("PassWord@Es123\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Version for products")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_VERSION")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.1")]),s._v(".0\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KIBANA_VERSION")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.1")]),s._v(".0\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOGSTASH_VERSION")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.1")]),s._v(".0\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Set the cluster name")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CLUSTER_NAME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("elk-cluster\n \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Port to expose XX HTTP API to the host")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_PORT")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NET_URL")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);