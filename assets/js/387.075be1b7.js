(window.webpackJsonp=window.webpackJsonp||[]).push([[387],{703:function(s,a,t){"use strict";t.r(a);var e=t(7),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"volume-一句话总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#volume-一句话总结"}},[s._v("#")]),s._v(" VOLUME 一句话总结")]),s._v(" "),a("ul",[a("li",[s._v("作用：创建一个匿名数据卷挂载点")]),s._v(" "),a("li",[s._v('格式： VOLUME ["/data"] ')]),s._v(" "),a("li",[s._v("详解：运行容器时可以从本地主机或其他容器挂载数据卷，一般用来存放数据库和需要保持的数据等")])]),s._v(" "),a("h3",{attrs:{id:"实际栗子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实际栗子"}},[s._v("#")]),s._v(" 实际栗子")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("VOLUME "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("这里的&nbsp/data 目录就会在运行时自动挂载为匿名卷，任何向 /data 中写入的信息都不会记录进容器存储层，从而保证了容器存储层的无状态化")]),s._v(" "),a("li",[s._v("容器运行时使用 docker run -v mydata:/data  可以覆盖这个挂载设置【个人测试的时候貌似并不可以，不知道是不是姿势不对。。】")]),s._v(" "),a("li",[s._v("必须使用双引号，不能使用单引号")])]),s._v(" "),a("h3",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[s._v("#")]),s._v(" 注意事项")]),s._v(" "),a("h4",{attrs:{id:"使用基于-windows-的容器时"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用基于-windows-的容器时"}},[s._v("#")]),s._v(" 使用基于 Windows 的容器时")]),s._v(" "),a("p",[s._v("挂载的目录必须是以下之一：")]),s._v(" "),a("ul",[a("li",[s._v("一个不存在或空的目录")]),s._v(" "),a("li",[s._v("C 盘以外的盘")])]),s._v(" "),a("h4",{attrs:{id:"无法通过-volume-挂载主机目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#无法通过-volume-挂载主机目录"}},[s._v("#")]),s._v(" 无法通过 VOLUME 挂载主机目录")]),s._v(" "),a("ul",[a("li",[s._v("为了镜像的可移植性，VOLUME 指令不支持指定主机目录参数（像  docker run -v <主机目录>:<容器目录>  是可以指定主机目录的）")]),s._v(" "),a("li",[s._v("如果要指定，还是要通过 docker run -v 来指定主机目录哦")])]),s._v(" "),a("h4",{attrs:{id:"volumn-指令后面的步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#volumn-指令后面的步骤"}},[s._v("#")]),s._v(" VOLUMN 指令后面的步骤")]),s._v(" "),a("p",[s._v("如果在 VOLUMN 指令后面的构建步骤更改了卷中的数据，这些数据会被丢弃")]),s._v(" "),a("h3",{attrs:{id:"小栗子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小栗子"}},[s._v("#")]),s._v(" 小栗子")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("FROM ubuntu\nRUN "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /myvol\nRUN "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello world"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /myvol/greeting\nVOLUME /myvol\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"运行容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行容器"}},[s._v("#")]),s._v(" 运行容器")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("没有用 -v 挂载卷")]),s._v(" "),a("h4",{attrs:{id:"通过-docker-inspect-查看挂载卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过-docker-inspect-查看挂载卷"}},[s._v("#")]),s._v(" 通过 docker inspect 查看挂载卷")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" inspect 3d2f\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("可以看到 Volumes 空")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Volumes"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/myvol"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);