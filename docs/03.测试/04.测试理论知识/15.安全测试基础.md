---
title: 安全测试基础
date: 2023-02-17 11:21:55
permalink: /pages/40ec9e/
categories:
  - 测试
  - 测试理论知识
tags:
  - 
author: 
  name: kamalyes
  link: https://github.com/kamalyes
---
**常见安全攻击手段**
------------

- **冒充：** 一个实体假装成一个不同的实体，常和消息篡改和重演一起使用
- **重演：** 当消息为了产生非授权效果而被重复时，就出现重演了
- **消息篡改：** 数据所传送的内容被改变而未被发觉，并导致非授权后果
- **服务拒绝：** 通过向认证/授权服务发送大量虚假请求，占用系统带宽造成关键服务繁忙，使得授权服务不能正常执行，产生服务拒绝

**安全性测试方法****（安全防护策略）**
-----------------------

- **功能验证**
- **侦听技术**
- **模拟攻击试验**
- **漏洞扫描：** 对软件系统和网络系统进行安全监测，以找出有安全隐患的漏洞
- **安全日志：** 记录非法用户的相关操作和信息
- **入侵检测：** 从系统内部和各种网络资源中主动采集信息，从中分析可能得网络入侵或攻击
- **隔离防护：** 将系统中的安全部分和非安全部分进行隔离，防火墙主要用于内网和外网的逻辑隔离

**WEB应用的安全性测试**
---------------

可以从部署与基础结构、输入验证、身份验证、授权、配置管理、敏感数据、会话管理、加密、参数操作、异常管理、审核、日志记录多个方面进行

**关于SSL的的WEB应用安全性测试用例**
-----------------------
```

1、SQL测试用例，账号输入name'--
2、https://替换成http://
3、内容访问，访问有文件的链接
4、内部URL拷贝：将登录后的URL拷贝出来，重启浏览器粘贴URL
```

**防火墙测试点**
----------

- 是否支持交换和路由两种工作模式

- 是否支持对HTTP、FTP、SMTP等服务类型的访问控制

- 是否考虑到防火墙的冗余设计

- 是否支持对日志的统计分析功能，同时，日志是否可以存储在本地和网络数据库上

- 防火墙受攻击后，是否有告警方式

**入侵检测系统**
----------
- 能否在检测到入侵事件时，自动执行切断服务，记录入侵行为

- 是否支持收集攻击信息

- 是否提供监视方式

**对用户权限控制的测试**
--------------

- 对用户权限控制体系合理性

*   是否采用分离管理模式
*   是否具有唯一性、口令的强度、存储位置、加密强度

- 对用户权限分配合理性

*   权限分配的细致程度
*   特定权限用户访问系统功能的能力测试

**网页篡改途径**
----------

- 通过操作系统、网路服务、数据库漏洞

- 通过猜测/破解管理员密码

- 通过WEB漏洞或设计缺陷

**防篡改系统的基本功能**
--------------

- 自动监测

- 自动备份与恢复

- 自动报警

**如何防篡改**
---------

- 修复漏洞

- 封闭未使用端口

- 设计安全性高的代码

- 设置强密码

- 安装防火墙

- 设置访问权限

XSS（Cross Site Scripting）跨站脚本攻击介绍
---------------------------------

### 什么是XSS

web攻击的一种，通过对网页注入可执行代码（html代码或JS代码）成功被浏览器执行

### 实施XSS攻击具备的条件

1.  需要向web页面能够注入恶意代码（输入框、url）
2.  恶意代码能够被浏览器成功执行

### XSS攻击原理

用户传入的数据被当做是程序，所以会执行程序

### XSS能干嘛

*   **获取页面数据：**通过document即可获取指定元素的值，如获取用户名称、手机号、住址等【偷取网站任意数据包括用户资料】
*   **获取cookies：**通过document.cookies可以获取网站当前的所有cookies，盗取当前登录用户的登录态，从而冒充被盗用户登录网站甚至后台管理系统【偷取用户密码和登录态】
*   **劫持前端逻辑：**可以修改某个操作的反馈内容，譬如点击某个按钮本来应该只提交一个请求，但通过XSS脚本可篡改该请求地址，然后用户提交的信息发送到攻击者封装的接口；或可改变用户跳转的页面【欺骗用户，流量劫持】
*   **发送请求：**攻击者可以让用户在不知情的情况下发送某个请求收集用户信息

### XSS攻击方式

*   反射型XSS：用户访问一个被攻击者篡改后的链接时，被植入的脚本会被用户浏览器执行，也称非持久型因为是一次性，仅对当次的页面访问产生影响
*   反射型XSS场景：带有XSS脚本的链接转成的短链；【在url后跟xss脚本】，网址跳转
*   存储型XSS：包含XSS攻击脚本的内容会被存储到服务器端，也称持久型，用户读取到内容时会自动执行脚本
*   存储型XSS场景：其他用户查看别人发布的留言、评论，管理员发布的公告，黑客发布的博客文章；反馈功能，投诉功能，聊天记录功能

![](https://raw.githubusercontent.com/kamalyes/image-bed/master/col/testing/1896874-20191225194232643-724273843.png)

### XSS攻击注入点

*   **HTML节点内容：** 动态生成，包含用户输入的内容，从而包含XSS脚本
*   **HTML属性：** 像img的src、输入框的value等需要用户自行输入的地方
*   **JS代码：** 某个JS代码需要用户传值进入
*   **富文本：** 富文本编辑框本身保存的内容就包含html标签，用户可输入XSS脚本

### 潜在注入点

判断输入点是否可以成功把数据注入到页面内容，对于提交数据内容但是不输出到页面的输入点是没有必要进行Fuzzing的，因为即使可以提交攻击代码，也不会产生XSS；

**Fuzzing：**模拟XSS攻击，模糊测试挖漏洞最常用的一种手段，不断尝试的过程

**Payload：**相当于测试用例

```
标签属性中： 如<a href\="注入位置"\>test</a\>，　　　　　　 **Payload**："></a\><script\>alert(0)</script\><a  href\="  

```

```
标签事件中： <img href\="a.jpg" onload\="注入位置"\>, 　　**Payload：alert**(0)
```

### 防御XSS攻击

1.  浏览器自带防御，X-XSS-Protection，主要防御反射型XSS攻击，如参数出现在HTML内容和属性
2.  对html内容进行转义，譬如将【<>】转义成&lt; &gt; 存入数据库时即转义，或显示时转义
3.  对html属性中的双引号和单引号【"" ''】转义成&quto; &apos;
4.  CSP1（Content SecurityPolicy）内容安全策略，用于指定哪些内容可执行

CSRF（Cross Site Request Forgy）跨站请求伪造
------------------------------------

### 通俗易懂的理解CSRF

1.  用户访问的网站对恶意网站发出了一些请求，且这些请求是用户不知情的情况下完成的
2.  攻击者盗用受信任用户的身份，以他的名义向第三方网站发送恶意请求，对于服务器来说这个请求时合法的

### CSRF攻击原理

![](https://raw.githubusercontent.com/kamalyes/image-bed/master/col/testing/1896874-20191225195006018-1523360031.png)

### CSRF是如何攻击的？又如何防御

1.  站点B向站点A发送请求
2.  请求带站点Acookies
3.  不访问站点A前端
4.  referer为站点B

### CSRF攻击危害

1.  利用用户登录态
2.  用户不知情
3.  完成业务请求（盗取用户资金、冒充用户发帖背锅）
4.  造成蠕虫攻击
