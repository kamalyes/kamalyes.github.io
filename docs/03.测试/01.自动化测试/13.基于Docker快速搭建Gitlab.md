---
title: 基于docker快速搭建gitlab
date: 2023-02-18 13:19:00
permalink: /pages/8898f1/
categories:
  - 测试
  - 自动化测试
tags:
  - 
author: 
  name: kamalyes
  link: https://github.com/kamalyes
---
# **准备**

一台内存不小于4G，硬盘大小不低于20g的服务器。
硬件要求：​[​https://docs.gitlab.com/ee/install/requirements.html​](https://docs.gitlab.com/ee/install/requirements.html)​


# 使用`docker-compose`文件部署
1. 宿主机创建文件
```
sudo mkdir -p /opt/gitlab/gitlab/{config,data,logs}
sudo mkdir -p /opt/gitlab/gitlab-runner/{config,data,logs}
cd /opt/gitlab/
```
2. 创建`docker-compose`文件 `vim docker-compose.yaml`
```docker
version: '3'
services:
    gitlab:
      image: 'gitlab/gitlab-ce:15.8.3-ce.0'
      restart: unless-stopped
      hostname: 'dev.gitlab.com'
      environment:
        TZ: 'Asia/Shanghai'
        GITLAB_OMNIBUS_CONFIG: |
          external_url 'http://dev.gitlab.com:9999'
          gitlab_rails['time_zone'] = 'Asia/Shanghai'
      ports:
        - '9999:9999'
        # - '443:443'
        # - '22:22'
      volumes:
        - /opt/gitlab/gitlab/config:/etc/gitlab
        - /opt/gitlab/gitlab/data:/var/opt/gitlab
        - /opt/gitlab/gitlab/logs:/var/log/gitlab
    runner:
      image: 'gitlab/gitlab-runner:latest'
      container_name: 'gitlab-runner'
      restart: always
      links:
        - gitlab:dev.gitlab.com
      volumes:
        - '/opt/gitlab/gitlab-runner/config:/etc/gitlab-runner'
        - '/var/run/docker.sock:/var/run/docker.sock'
        - '/usr/bin/docker:/bin/docker'
```