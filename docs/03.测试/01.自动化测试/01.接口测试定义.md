---
title: 接口测试定义
date: 2023-02-09 11:56:06
permalink: /pages/3f1b90
categories:
  - 测试
  - automate
tags:
  - 
author: 
  name: kamalyes
  link: https://github.com/kamalyes
---
## 请问你们公司是如何做接口测试的？

接口测试实际跟一般测试不同就是测试用例的设计部分。
- ①获取接口规范。
- ②设计接口测试功能用例（主要从用户角度出发看接口能否实现业务需求，用例设计就是黑盒用例那一套）。
- ③各种入参验证（正常情况，异常情况包括输入参数个数不对，类型不对，可选/必选，还有考虑参数有互斥或关联的情况）。
- ④接口返回值各种验证（符合接口文档需求）
- ⑤了解接口实现逻辑，实现逻辑覆盖（语句/条件/分支/判定/…）
- ⑥接口能并发执行吗、安全吗，性能满足要求吗?
- ⑦采用工具或者自写代码来验证。
- ⑧发现问题跟功能测试一样，该报bug报bug，该跟踪状态的跟踪状态。

可用性测试 
- 根据约定的协议、方法、格式内容，传输数据到接口经处理后返回期望的结果：接口功能是否正确实现；返回值除了内容要正确，类型也要正确，保证调用方能够正确地解析；参数值边界值、等价类测试
- 错误和异常处理测试 输入异常值（空值、特殊字符、超过约定长度等），接口能正确处理，且按预期响应；输入错误的参数，接口能正确处理，并按预期响应；多输入、少输入参数，接口能正确处理，且按预期响应；错误传输数据格式（如json格式写成form格式）测试

安全性测试，主要指传输数据的安全性：
- 敏感数据（如密码、秘钥）等是否加密传输
- 返回数据是否含有敏感数据，如用户密码、完整的用户银行账号信息等
- 接口是否对传入的数据做安全校验，如身份ID加token类似校验
- 接口是否防止恶意请求（如大量伪造请求接口致使服务器崩溃）

性能测试
- 如接口的响应时间、并发处理能力、压测处理情况
- 并发请求相同的接口（特别为POST请求），接口的处理情况（如插入了相同的记录导致数据出错，引发系统故障）
- 接口响应时长在用户可忍受的范围内
- 对于请求量大的接口做压测，确定最大的瓶颈点是否满足当前业务需要

## 平常用什么工具测接口的？（一定要用广泛用的、冷门的说了没用）
- 常用http协议接口测试工具，如：postman、fiddler、jmeter
- webService接口用SoapUI、jmeter等。

## 没有接口文档，如果做接口测试？
本题主要考情商，通俗来说就是忽悠能力，先唬住面试官了再说，进去了也是瞎测测，随时做好背锅的准备，当然，你肯定不能回答面试官不测(心理mmp，脸上笑嘻嘻)，接下来就是扯犊子时间
- 用抓包工具把接口抓取处理，然后针对性进行测试；接口中字段信息不清楚的，找时间集中寻求开发解答。（常用抓包工具Fiddler、Charles等）

## 接口测试常见bug
常规错误，接口没实现，没按约定返回结果，边界值处理出错等。

输入异常值（空值、特殊字符、超过约定长度等），接口抛错，没做封装处理

输入错误的参数、多输入、少输入参数，接口可能出现的错误

安全性问题，如明文传输、返回结果含有敏感信息，没对用户身份信息做校验，没做恶意请求拦截等

性能问题，如接口并发插入多条相同操作，响应时间过长，接口压测出现瓶颈等

- 特殊值处理不当导致程序异常退出或者崩溃
- 类型边界溢出，导致数据读出和写入不一致
- 取值边界外值未返回正确的错误信息
- 参数为null或空字符串“”等
- 权限未处理，可以访问其它用户的信息 例如:无权限可以访问，或者 一般用户可以访问管理员权限）
- 逻辑校验不完善，可利用漏洞获取非正当利益  例如：购物结算时为100元，调用后台接口设为0元，哈哈
- 状态处理不当，导致逻辑出现错误（可能程序员123都搞懵了）
- 数组类型item个数为0或者item重复时程序异常退出
- 超时问题，超时后处理
- 潜在性能问题（后台提交处理或者把性能风险提前提出）


## 对于加密接口，如何进行测试？
在调用接口的时候，要搞清楚接口的加密方式是什么。
- 如果是对称加密，要先从开发那里获取对称密钥，基于对称密钥可以加密请求数据，以及解密响应报文。
- 如果是非对称加密，先从开发获取服务器公钥和私钥，也要知道当前用户的公钥和私钥信息。以便完成接口的数据加密和解密。

## 你在接口测试中是怎么校验结果是否正确？
- 验证接口响应状态码是否是符合预期 这是接口测试的最基本要求
- 验证响应的完整内容是否等于预期。
- 当接口响应正文比较短，响应正文内容固定时，可以验证响应内容是否精确地等于预期的内容。
- 验证响应报文是否包含关键信息。当响应内容较长时，可以判断响应内容中是否包含一些关键信息，以此作为验证接口功能的验证点。
- 验证响应报文关键字段是否存在。当响应正文为XML格式或JSON格式时，可以通过XPATH或JSONPATH表达式，指定其中的某个节点，判断它是否存在。
- 验证响应报文关键字段，值是否正确。除了可以验证字段是否存在，如果值是固定的或有确定规则的，还可以验证其值是否正确。若值固定可以验证相等，如果不固定可以考虑用正则表达式匹配。
- 查询数据库或调用其余接口查询。当要验证的信息在当前测试接口的响应内容中不存在时，可以调用其它接口来验证。例如，一个增加用户信息的接口，要验证信息确实增加成功了，可以再调用查询用户信息接口来确认用户信息添加成功。当然，在获取数据库查询权限的情况下，也可以直接查询数据库来验证。
- 以上说的都是功能方面的验证，另外从性能角度，还可以验证接口的响应时间，看是否在一个合理的范围内。

## 如何分析一个bug是前端还是后端的？
- 这种情况很容易判断，先抓包看请求报文，对着接口文档，看请求报文有没有问题，有问题就是前端发的数据不对；

- 请求报文没问题，那就看返回报文，返回的数据不对，那就是后端开发的问题

## 接口测试如何设计测试用例？
- 接口测试一般考虑入参形式的变化和接口的业务逻辑，一般设计接口测试用例采用等价类、边界值、场景法居多。

接口测试设计测试用例的思路如下：

- 正常用例，验证接口逻辑是否正确。根据业务逻辑、输入参数、输出值的描述，对正常输入情况下所得的输出值

- 异常用例，为了保证数据的安全及程序在异常情况下的逻辑的正确性而进行的测试。

## 模块接口测试的主要包括以下几个方面：
- 鉴权码token异常(鉴权码为空<没有鉴权码>,错误的鉴权码,过期的鉴权码)
- 请求参数正常/异常。
- 返回结果校验，数据库比对

## 接口自动化过程中都遇到了些什么棘手问题？
1、代码型的脚本编写方式，很多人一起写用例，写法各不统一，重复逻辑满天飞。解决嘛，代码明确分层 + 做一些写法培训 + 新人写代码必须经过审核才能 merge
2、环境不稳定，执行时刚好有人重启服务那就直接失败。解决方案：类似线上，核心服务做平滑上线，后面的节点启动完毕才把流量切换到新节点。
3、数据库断言写起来费时费力，维护也麻烦。解决方案：先根据数据库实际内容自动生成断言，然后执行第二次，给一些会自动变化的参数（如时间）加标记忽略校验。
4、case 数量太多导致执行时间很长 -- 解决办法是并发执行。
5、case 不稳定因素 -- 稳定性和错误处理。
